    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.body.classList.add('loaded');

            // Controle do menu hamburguer
            const menuToggle = document.getElementById('menuToggle');
            const menuOverlay = document.getElementById('menuOverlay');
            const menuContent = document.getElementById('menuContent');

            menuToggle.addEventListener('click', function () {
                menuContent.classList.toggle('active');
                menuOverlay.classList.toggle('active');

                const spans = menuToggle.querySelectorAll('span');
                if (menuContent.classList.contains('active')) {
                    spans[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
                    spans[1].style.opacity = '0';
                    spans[2].style.transform = 'rotate(-45deg) translate(7px, -6px)';
                } else {
                    spans[0].style.transform = 'none';
                    spans[1].style.opacity = '1';
                    spans[2].style.transform = 'none';
                }
            });

            menuOverlay.addEventListener('click', function () {
                menuContent.classList.remove('active');
                menuOverlay.classList.remove('active');
                const spans = menuToggle.querySelectorAll('span');
                spans[0].style.transform = 'none';
                spans[1].style.opacity = '1';
                spans[2].style.transform = 'none';
            });

            // Validação do formulário de ordem em massa
            const bulkOrderForm = document.getElementById('bulkOrderForm');
            const bulkOrdersTextarea = document.getElementById('bulkOrders');
            const bulkOrdersError = document.getElementById('bulkOrdersError');
            const successMessage = document.getElementById('successMessage');

            bulkOrderForm.addEventListener('submit', function (e) {
                e.preventDefault();
                bulkOrdersError.style.display = 'none';

                const ordersText = bulkOrdersTextarea.value.trim();
                if (!ordersText) {
                    showError('Por favor, insira pelo menos um pedido.');
                    return;
                }

                const orders = ordersText.split('\n');
                if (orders.length > 50) {
                    showError('Máximo de 50 pedidos por envio.');
                    return;
                }

                const invalidOrders = [];
                const validOrders = [];

                orders.forEach((order, index) => {
                    const parts = order.split('|').map(part => part.trim());
                    if (parts.length !== 3) {
                        invalidOrders.push(`Linha ${index + 1}: Formato inválido. Use "ID | Link | Quantidade"`);
                        return;
                    }

                    const [serviceId, profileUrl, quantity] = parts;

                    // Validar ID do serviço
                    if (!/^\d+$/.test(serviceId)) {
                        invalidOrders.push(`Linha ${index + 1}: ID do serviço deve ser numérico`);
                        return;
                    }

                    // Validar URL do perfil
                    if (!isValidUrl(profileUrl)) {
                        invalidOrders.push(`Linha ${index + 1}: URL do perfil inválida`);
                        return;
                    }

                    // Validar quantidade
                    const quantityNum = parseInt(quantity);
                    if (isNaN(quantityNum)) {
                        invalidOrders.push(`Linha ${index + 1}: Quantidade deve ser um número`);
                        return;
                    }

                    if (quantityNum < 50) {
                        invalidOrders.push(`Linha ${index + 1}: Quantidade mínima é 50`);
                        return;
                    }

                    validOrders.push({
                        serviceId,
                        profileUrl,
                        quantity: quantityNum
                    });
                });

                if (invalidOrders.length > 0) {
                    showError(invalidOrders.join('<br>'));
                    return;
                }

                // Se chegou aqui, todos os pedidos são válidos
                console.log('Pedidos válidos:', validOrders);

// Enviar pedidos para a API
fetch('/api/massorder', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + localStorage.getItem("token") // se usa autenticação por token
    },
    body: JSON.stringify({ pedidos: validOrders })
})
.then(response => response.json())
.then(data => {
    if (data.sucesso) {
        successMessage.style.display = 'block';
        bulkOrderForm.reset();
        setTimeout(() => {
            window.location.href = 'orders';
        }, 3000);
    } else {
        showError(data.erro || 'Erro ao enviar pedidos');
    }
})
.catch(err => {
    console.error("Erro ao criar ações:", err);
    showError('Erro ao enviar pedidos.');
});

            });

            function showError(message) {
                bulkOrdersError.innerHTML = message;
                bulkOrdersError.style.display = 'block';
            }

            function isValidUrl(url) {
                try {
                    new URL(url);
                    return true;
                } catch (e) {
                    return false;
                }
            }
        });

        function logout() {
            localStorage.removeItem("token");
            window.location.href = "https://smmsociais.com";
        }
    </script>
</body>

</html>
